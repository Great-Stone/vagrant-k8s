global:
  name: consul
  datacenter: dc1
  #image: "hashicorp/consul:1.10"
  image: "hashicorp/consul-enterprise:1.10-ent"
  # imageK8S: "hashicorpdev/consul-k8s:latest"
  # imageEnvoy: "envoyproxy/envoy-alpine:v1.16.0"
  tls:
    enabled: true
    verify: false
    httpsOnly: false
  gossipEncryption:
    secretName: consul-gossip-encryption-key
    secretKey: key
  metrics:
    enabled: true
    enableGatewayMetrics: true
server:
  replicas: 1
  bootstrapExpect: 1
  enterpriseLicense:
    secretName: license
    secretKey: consul.hclic
  disruptionBudget:
    enabled: true
    maxUnavailable: 0
  storageClass: local-storage
  extraConfig: |
    {
      "telemetry": {
        "prometheus_retention_time": "8h",
        "disable_hostname": true
      },
      "ui_config": {
        "enabled": true,
        "metrics_provider": "prometheus",
        "metrics_proxy": {
          "base_url": "http://prometheus-server"
        }
      }
    }
  # exposeGossipAndRPCPorts: true
  # serflan:
  #   port: 9301

client:
  enabled: true
  grpc: true
  extraConfig: |
    {
      "advertise_reconnect_timeout": "15m",
      "telemetry": {
        "prometheus_retention_time": "1m",
        "disable_hostname": true
      }
    }
  # exposeGossipPorts: true
controller:
  enabled: true

connectInject:
  enabled: true
  default: false
  replicas: 1
  centralConfig:
    enabled: true
  envoyExtraArgs: "-l debug"
  metrics:
    defaultEnabled: true
    defaultEnableMerging: true
  transparentProxy:
    defaultEnabled: true

meshGateway:
  enabled: true
  replicas: 1
  service:
    type: NodePort
    nodePort: 31001

syncCatalog:
  enabled: true
  toConsul: false
  toK8S: true

dns:
  enabled: true

ingressGateways:
  enabled: true
  replicas: 1
  gateways:
  - name: ingress-gateway
    service:
      type: NodePort
      ports:
      - port: 31000
        nodePort: 31000

ui:
  service:
    type: NodePort
    ports:
    - port: 80
      nodePort: 31080
    - port: 443
      nodePort: 31443
